<div class="h-full" id="login">
  <div class="text-center mb-8">
    <div class="flex items-center justify-center mb-4">
      <div class="relative">
        <img
          src="logo/logo-elab.png"
          alt="E-Landela Lab"
          height="80"
          class="relative z-10"
        />
      </div>
    </div>
    <p-divider></p-divider>
    <div class="mb-6 mt-6">
      <p class="text-gray-600 text-sm">
        Connectez-vous pour accéder à l'application
      </p>
    </div>
  </div>

  <div [formGroup]="loginForm">
    <div class="mb-4">
      <label for="email" class="flex font-medium mb-2 gap-2 items-center">
        {{ "Nom d'utilisateur" }}</label
      >
      <div class="relative">
        <p-iconfield>
          <p-inputicon class="fas fa-user text-base"> </p-inputicon>
          <input
            id="email"
            type="text"
            pInputText
            placeholder="Entrez votre nom d'utilisateur"
            formControlName="email"
            [ngClass]="{ 'ng-invalid ng-dirty': email?.invalid }"
            class="w-full pl-10 pr-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
          />
        </p-iconfield>
      </div>
      @if(email?.touched) {
      <div class="mt-1">
        <small
          class="p-error block text-red-500"
          *ngIf="email?.errors?.['required']"
          >{{ "Email est requis" }}</small
        >
        <small
          class="p-error block text-red-500"
          *ngIf="email?.errors?.['email']"
          >{{ "emailInvalid" }}</small
        >
      </div>
      }
    </div>

    <div class="mb-6">
      <label for="password" class="flex font-medium mb-2 gap-2 items-center">
        {{ "Mot de passe" }}</label
      >
      <div class="relative">
        <p-password
          id="password"
          class="w-full"
          formControlName="password"
          placeholder="Entrez votre mot de passe"
          [style]="{ width: '100%' }"
          inputStyleClass="w-full pl-10 pr-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
          [toggleMask]="true"
          [ngClass]="{
            'ng-invalid ng-dirty': password?.invalid
          }"
          [promptLabel]="'Entrer un mot de passe'"
          [weakLabel]="'Faible' "
          [mediumLabel]="'Moyen' "
          [strongLabel]="'Fort' "
          [feedback]="false"
        >
        </p-password>
        <i
          class="fas fa-lock text-base absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 z-10"
        ></i>
      </div>
      @if(password?.touched) {
      <div class="mt-1">
        <small
          class="p-error block text-red-500"
          *ngIf="password?.errors?.['required']"
        >
          {{ "Mot de passe est requis" }}</small
        >
        <small
          class="p-error block text-red-500"
          *ngIf="password?.errors?.['pattern']"
        >
          {{ "Mot de passe faible" }}
        </small>
      </div>
      }
    </div>

    <div class="flex items-center justify-between mb-6">
      <div class="flex items-center">
        <p-checkbox
          id="rememberMe"
          [binary]="true"
          formControlName="rememberMe"
          class="mr-2"
          (onChange)="onRememberMeChange($event)"
        ></p-checkbox>
        <label for="rememberMe" class="text-sm text-gray-600 cursor-pointer"
          >{{ "Se souvenir de moi" }}</label
        >
      </div>
      <p-button
        [label]="'Mot de passe oublié ?' "
        [link]="true"
        id="forgotpassword"
        (onClick)="goToForgotPassword()"
        styleClass="text-blue-600 hover:text-blue-800 text-sm font-medium"
      />
    </div>

    <p-button
      pRipple
      id="login-submit-button"
      [label]="'Se connecter' "
      styleClass="w-full py-3    font-semibold text-white "
[loading]="vm.loading()"
      [disabled]="loginForm.invalid"
      (onClick)="signin()"
    />

    <!-- Help Section -->
    <div class="mt-6 pt-6 border-t border-gray-200">
      <div class="text-center">
        <div class="flex items-center justify-center mb-3">
          <i class="fas fa-info-circle text-blue-500 mr-2"></i>
          <h3 class="text-sm font-semibold text-gray-700">Besoin d'aide ?</h3>
        </div>
        <p class="text-xs text-gray-600 mb-3">
          Contactez l'administrateur système pour obtenir vos identifiants de
          connexion
        </p>
        <div
          class="flex items-center justify-center space-x-4 text-xs text-gray-500"
        >
          <span class="flex items-center">
            <i class="fas fa-envelope mr-1"></i>
            admin@elandela.com
          </span>
          <span class="flex items-center">
            <i class="fas fa-phone mr-1"></i>
            +243 XXX XXX XXX
          </span>
        </div>
      </div>
    </div>
  </div>
</div>
