<div class="p-6 bg-gray-50 min-h-screen w-full">
  <!-- Header -->
  <div class="flex justify-between items-center mb-6">
    <div>
      <h1 class="text-2xl font-bold text-gray-900 mb-2">
        Gestion des Activités
      </h1>
      <p class="text-gray-600">Gérez les activités des cohortes</p>
    </div>
    <p-button
      label="Nouvelle Activité"
      icon="fas fa-plus"
      (onClick)="showAddDialog = true"
    ></p-button>
  </div>

  <!-- Search and Filters -->
  <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2"
          >Rechercher</label
        >
        <input
          type="text"
          pInputText
          placeholder="Nom de l'activité..."
          [(ngModel)]="searchTerm"
          class="w-full"
        />
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2"
          >Cohorte</label
        >
        <p-select
          [options]="cohortOptions"
          [(ngModel)]="selectedCohort"
          placeholder="Toutes les cohortes"
          optionLabel="label"
          optionValue="value"
          class="w-full"
        ></p-select>
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2"
          >Statut</label
        >
        <p-select
          [options]="statusOptions"
          [(ngModel)]="selectedStatus"
          placeholder="Tous les statuts"
          optionLabel="label"
          optionValue="value"
          class="w-full"
        ></p-select>
      </div>
    </div>
  </div>

  <!-- Activities Table -->
  <div
    class="bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"
  >
    <p-table
      [value]="filteredActivities"
      [paginator]="true"
      [rows]="10"
      [showCurrentPageReport]="true"
      currentPageReportTemplate="Affichage de {first} à {last} sur {totalRecords} activités"
    >
      <ng-template pTemplate="header">
        <tr>
          <th
            class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
          >
            Activité
          </th>
          <th
            class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
          >
            Cohorte
          </th>
          <th
            class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
          >
            Statut
          </th>
          <th
            class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
          >
            Créé le
          </th>
          <th
            class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
          >
            Actions
          </th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-activity>
        <tr class="hover:bg-gray-50">
          <td class="px-6 py-4 whitespace-nowrap">
            <div class="flex items-center">
              <div class="flex-shrink-0 h-10 w-10">
                <div
                  class="h-10 w-10 rounded-full bg-gradient-to-r from-orange-500 to-red-600 flex items-center justify-center text-white font-semibold"
                >
                  <i class="fas fa-clipboard-list"></i>
                </div>
              </div>
              <div class="ml-4">
                <div class="text-sm font-medium text-gray-900">
                  {{ activity.name }}
                </div>
                <div class="text-sm text-gray-500">
                  {{ activity.description || 'Aucune description' }}
                </div>
              </div>
            </div>
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
            {{ activity.cohortId }}
          </td>
          <td class="px-6 py-4 whitespace-nowrap">
            <span
              class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"
              [ngClass]="{
                'bg-green-100 text-green-800': activity.isActive,
                'bg-gray-100 text-gray-800': !activity.isActive
              }"
            >
              {{ activity.isActive ? 'Active' : 'Inactive' }}
            </span>
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
            {{ activity.createdAt | date:'short' }}
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
            <div class="flex space-x-2">
              <p-button
                icon="fas fa-eye"
                variant="outlined"
                size="small"
                [text]="true"
                (onClick)="viewActivity(activity)"
                pTooltip="Voir"
              ></p-button>
              <p-button
                icon="fas fa-edit"
                variant="outlined"
                size="small"
                [text]="true"
                (onClick)="editActivity(activity)"
                pTooltip="Modifier"
              ></p-button>
              <p-button
                [icon]="activity.isActive ? 'fas fa-pause' : 'fas fa-play'"
                variant="outlined"
                size="small"
                [text]="true"
                [severity]="activity.isActive ? 'warn' : 'success'"
                (onClick)="toggleActivityStatus(activity)"
                [pTooltip]="activity.isActive ? 'Désactiver' : 'Activer'"
              ></p-button>
              <p-button
                icon="fas fa-trash"
                variant="outlined"
                size="small"
                [text]="true"
                severity="danger"
                (onClick)="deleteActivity(activity)"
                pTooltip="Supprimer"
              ></p-button>
            </div>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>

  <!-- Add Activity Dialog -->
  <p-dialog
    header="Nouvelle Activité"
    [(visible)]="showAddDialog"
    [modal]="true"
    [style]="{width: '600px'}"
    [closable]="true"
  >
    <div class="space-y-4">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2"
          >Nom de l'activité</label
        >
        <input
          type="text"
          pInputText
          placeholder="TP Chimie Organique"
          class="w-full"
        />
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2"
          >Description</label
        >
        <textarea
          pTextarea
          rows="3"
          placeholder="Description de l'activité..."
          class="w-full"
        ></textarea>
      </div>
      <div class="grid grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2"
            >Cohorte</label
          >
          <p-select
            [options]="cohortOptions"
            placeholder="Sélectionner une cohorte"
            optionLabel="label"
            optionValue="value"
            class="w-full"
          ></p-select>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2"
            >Statut</label
          >
          <p-select
            [options]="statusOptions"
            placeholder="Sélectionner un statut"
            optionLabel="label"
            optionValue="value"
            class="w-full"
          ></p-select>
        </div>
      </div>
    </div>
    <ng-template pTemplate="footer">
      <div class="flex justify-end space-x-2">
        <p-button
          label="Annuler"
          variant="outlined"
          (onClick)="showAddDialog = false"
        ></p-button>
        <p-button label="Créer" (onClick)="createActivity()"></p-button>
      </div>
    </ng-template>
  </p-dialog>
</div>
